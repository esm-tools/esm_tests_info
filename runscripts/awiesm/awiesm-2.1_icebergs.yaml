# Script provided by Lars Ackermann in PR #588, copied from
# /work/ollie/lackerma/glacial-inception/experiments/test_ib06/scripts//awiesm.yaml
general:
    account: !ENV ${ACCOUNT}
    setup_name: "awiesm"
    version: "2.1"
    compute_time: "01:20:00"
    initial_date: "2001-01-01"
    final_date: "2003-12-31"
    nmonth: 0
    nyear: 1
    iterative_coupling: false
    use_venv: False
    with_wiso: false
    base_dir: !ENV ${ESM_TESTING_DIR}
    #clean_old_rundirs_keep_every: 5
    #clean_old_rundirs_except: 2

awiesm:
    postprocessing: false
    model_dir: !ENV ${MODEL_DIR}
    version: "2.1"

echam:
    lresume: false
    restart_rate: 1
    restart_unit: "years"
    nprocar: 0
    nprocbr: 0
    nproma: 8
    npromar: 0
    nproca: 24
    nprocb: 24
    lrad_async: False
    hosing_correction: False
#    add_config_sources:
#            namelist.echam: "/home/ollie/pgierz/shared/gitlab.awi.de/paleodyn/models/namelists/spinup/echam/namelist.echam"

#    add_input_sources:
#            jansurf: "/work/ollie/pool/FESOM/meshes_rotated/CORE2_final/tarfilesT63/input/echam6//T63CORE2_jan_surf.nc"
#            vltclim:  "/work/ollie/pool/FESOM/meshes_rotated/CORE2_final/tarfilesT63/input/echam6//T63CORE2_VLTCLIM.nc"
#            vgratclim: "/work/ollie/pool/FESOM/meshes_rotated/CORE2_final/tarfilesT63/input/echam6//T63CORE2_VGRATCLIM.nc"

    namelist_changes:
            namelist.echam:
                    radctl:
                            lrad_async: False
                            yr_perp: "remove_from_namelist"
                    runctl:
                            l_orbvsop87: false
                            default_output: False
                            lcouple_co2: False

fesom:
    ALE_scheme: "zstar"
    lresume: false
    use_icebergs: true
    use_icesheet_coupling: true
    ini_iceberg_dir: "/home/ollie/lackerma/ICEBERGS/ib_30000/"
    iceberg_dir: "/home/ollie/lackerma/ICEBERGS/ib_30000/"
    pool_dir: "/work/ollie/pool/FESOM/"
    mesh_dir: "/work/ollie/sxu/AWICM-2.0/meshes/core2_dkrz/"
    namelist_dir: "/work/ollie/lackerma/glacial-inception/software/github.com/esm-tools/esm_tools/namelists/fesom2/2.1/"
    resolution: "CORE2"
    restart_rate: 1
    restart_unit: "y"
    restart_first: 1
    add_required_plugins:
            - "git+https:/gitlab.awi.de/paleodyn/Projects/PalMod/gfw_creator.git"

    climate_data_dir: "/work/ollie/pool/FESOM/hydrography/"
    add_namelist_changes:
            namelist.config:
                    icebergs:
                            steps_per_ib_step: 8
                            ib_async_mode: 0
                    geometry:
                            force_rotation: false
